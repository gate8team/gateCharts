<!doctype html>
<html>
<head>
	<title>Test task</title>
	<meta charset="utf-8">
</head>
<body style="background: #EBF0F2;">
	<svg id="svg">
        <piece value="20" name="" color=""></piece>
        <piece value="70" name="" color=""></piece>
        <piece value="20" name="" color=""></piece>
        <piece value="15" name="" color=""></piece>
    </svg>
	<script src="./static/js/libs/snap.svg-min.js"></script>
    <!--<script src="./static/js/libs/snap.svg.js"></script>-->
    <script src="./static/js/pathStringBuilder.js"></script>
    <script src="./static/js/piePiece.js"></script>
    <script src="./static/js/pieChart.js"></script>

	<script>
        var pathStringBuilder = new PathStringBuilder()
            pieChart = new PieChart({elementSelector: '#svg'});


        var percentage = [20, 70, 20, 15];
		var colors = ['#0B86EA', '#FFDA36', '#CCCCCC', '#67A008'];

		var sum = percentage.reduce(function(pv, cv) { return pv + cv; }, 0);

		var minAngle = -90, maxAngle = 90,
			diffAngle = maxAngle - minAngle;

		var i = j = 0;
        pieChart.initChart();

		percentage.forEach(function(el){
			var angle = diffAngle * el / sum;
            var title = 'Piece #' + j;

            var piePiece = new PiePiece(
                    {
                        title: title,
                        value: el,
                        color: colors[j++],
                        startAngle: minAngle,
                        endAngle: (minAngle + angle),
                        pathString: pathStringBuilder.changeAngles(minAngle, minAngle + angle).getPathString().join(''),
                        animatePath: pathStringBuilder.getPathString(8).join('')
                    }
            );

            pieChart.addPiePiece(piePiece.initPiece(pieChart.getChart()));
            minAngle += angle;
		});
	</script>
</body>
</html>