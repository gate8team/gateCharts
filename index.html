<!doctype html>
<html>
<head>
	<title>Test task</title>
	<meta charset="utf-8">
</head>
<body>
	<svg id="svg"></svg>
	<script src="./static/js/libs/snap.svg-min.js"></script>
    <script src="./static/js/pathStringBuilder.js"></script>
    <script src="./static/js/piePiece.js"></script>

	<script>
        var pathStringBuilder = new PathStringBuilder();

		var percentage = [20, 70, 20, 15, 15];
		var colors = ['#00ffff', '#0000ff', '#ff0000', '#ffff00', '#ff00ff'];

		var s = Snap("#svg");
		var sum = percentage.reduce(function(pv, cv) { return pv + cv; }, 0);

		var minAgle = 0, maxAngle = 180,
			diffAngle = maxAngle - minAgle;

		var i = j = 0;
		percentage.forEach(function(el){
			var angle = diffAngle * el / sum;
            var title = 'Piece #' + j;

            var piePiece = new PiePiece(
                    {
                        title: title,
                        value: el,
                        color: colors[j++],
                        startAngle: minAgle,
                        endAngle: (minAgle + angle),
                        pathString: pathStringBuilder.changeAngles(minAgle, minAgle + angle).getPathString(),
                        hoverIn: function(){
                            console.log(title);
                        },
                        hoverOut: function(){

                        }
                    }
            );

            console.log(piePiece);

			s.path(piePiece.getPathString()).attr({
			    fill: piePiece.getColor(),
				stroke: "#000000",
				strokeWidth: 1
			}).hover(
                piePiece._hoverIn,
                piePiece._hoverOut,
                '123',
                {}
            );

			minAgle += angle;
		});
	</script>
</body>
</html>